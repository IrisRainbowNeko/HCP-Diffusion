_base_:
  - cfgs/workflow/text2img.yaml

dtype: fp16
amp: fp16
bs: 2
seed: 42


load_image:
  - _target_: hcpdiff.workflow.LoadImageAction
    image_path: 'img_test/11.png'
  # maybe need resize
  #  - _target_: hcpdiff.workflow.ImageResizeAction
  #    width: 512
  #    height: 512
  - _target_: hcpdiff.workflow.EncodeAction
    vae: ${hcp.from_memory:vae}

config_diffusion:
  # prepare seed
  - _target_: hcpdiff.workflow.SeedAction
    seed: ${seed}
  - _target_: hcpdiff.workflow.MakeTimestepsAction
    N_steps: 30
    strength: 0.6 # image to image strength
  - load_image
  - _target_: hcpdiff.workflow.MakeLatentAction

actions:
  - build_model
  - optimize_model
  - text
  - config_diffusion
  - diffusion
  - decode